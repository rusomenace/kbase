# pool de servidores
upstream linkapi_app  {
  server 10.1.1.95:7000 max_fails=1 fail_timeout=10s;
  server 10.1.1.96:7000 max_fails=1 fail_timeout=10s;
}
# port 7000 listen
server  {
  listen 7000 ssl http2;
  error_page 497 301 =307 https://$host:$server_port$request_uri;
 # server_name  linkapi.tqcorp.com:7000; (removido con la linea de arriba)
  location / {
      proxy_pass http://linkapi_app;
    }
# ssl specifics
    ssl_protocols        TLSv1.1 TLSv1.2;
    ssl_ciphers RC4:HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
    keepalive_timeout    60;
        ssl_session_cache    shared:SSL:10m;
        ssl_session_timeout  10m;

# ssl certs
    ssl_certificate /etc/certs/ca.crt;
    ssl_certificate_key /etc/certs/ca.key;
# options
    client_max_body_size 64M;
    access_log  /var/log/nginx/linkapi.tqcorp.com.7000.ssl.access.log;
    error_log  /var/log/nginx/linkapi.tqcorp.com.7000.ssl.error.log;
}
